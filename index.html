<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gnome Survival</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050510; font-family: sans-serif; touch-action: none; }
        canvas { display: block; }
        #ui { position: absolute; top: 15px; left: 15px; color: white; font-weight: bold; pointer-events: none; z-index: 10; }
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.9); color: white; text-align: center; z-index: 20; }
        button { padding: 15px 40px; font-size: 20px; cursor: pointer; border: none; background: #00ff88; color: black; font-weight: bold; border-radius: 50px; box-shadow: 0 0 20px #00ff88; margin-top: 20px; }
    </style>
</head>
<body>
    <div id="ui">SCORE: <span id="scr">0</span> | LIVES: <span id="hrt">❤️❤️❤️</span></div>
    <div id="menu" class="overlay">
        <h1 style="color:#00ff88;">GNOME SURVIVAL</h1>
        <p>VERSIE 2.0 (KABOUTER EDITIE)</p>
        <button id="startBtn">START QUEST</button>
    </div>
    <canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c"), ctx = canvas.getContext("2d");
let l=1, s=0, lives=3, active=false, lastY=0;
const player = { x: 50, y: 0, w: 30, h: 45 }; 
let enemies = [], gems = [];

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    player.y = canvas.height / 2;
}
window.onresize = resize; resize();

window.addEventListener('touchstart', e => { lastY = e.touches[0].clientY; });
window.addEventListener('touchmove', e => {
    if(!active) return;
    e.preventDefault();
    player.y += (e.touches[0].clientY - lastY);
    lastY = e.touches[0].clientY;
    player.y = Math.max(10, Math.min(canvas.height - 50, player.y));
}, {passive: false});

function drawGnome(x, y) {
    // Muts (Neon Blauw)
    ctx.shadowBlur = 15; ctx.shadowColor = "#00d2ff";
    ctx.fillStyle = "#00d2ff";
    ctx.beginPath(); ctx.moveTo(x+15, y); ctx.lineTo(x, y+25); ctx.lineTo(x+30, y+25); ctx.fill();
    // Gezicht
    ctx.fillStyle = "#ffdbac"; ctx.fillRect(x+5, y+25, 20, 10);
    // Baard (Wit)
    ctx.fillStyle = "white";
    ctx.beginPath(); ctx.moveTo(x+5, y+30); ctx.lineTo(x+25, y+30); ctx.lineTo(x+15, y+45); ctx.fill();
}

function drawMushroom(x, y) {
    ctx.shadowBlur = 15; ctx.shadowColor = "red";
    ctx.fillStyle = "white"; ctx.fillRect(x+12, y+15, 6, 15);
    ctx.fillStyle = "red";
    ctx.beginPath(); ctx.arc(x+15, y+15, 15, Math.PI, 0); ctx.fill();
}

function drawDiamond(x, y) {
    ctx.shadowBlur = 20; ctx.shadowColor = "cyan";
    ctx.fillStyle = "cyan";
    ctx.beginPath(); ctx.moveTo(x+15, y); ctx.lineTo(x+25, y+12); ctx.lineTo(x+15, y+25); ctx.lineTo(x+5, y+12); ctx.fill();
}

function start() {
    active = true; s = 0; lives = 3; enemies = []; gems = [];
    document.getElementById("menu").style.display = "none";
    loop();
}

document.getElementById("startBtn").onclick = start;

function loop() {
    if(!active) return;
    ctx.fillStyle = "#050510"; ctx.fillRect(0,0,canvas.width,canvas.height);

    drawGnome(player.x, player.y);

    if(Math.random() < 0.02) enemies.push({x:canvas.width, y:Math.random()*(canvas.height-40), v:4});
    enemies.forEach((en, i) => {
        en.x -= en.v;
        drawMushroom(en.x, en.y);
        if(player.x < en.x+30 && player.x+30 > en.x && player.y < en.y+30 && player.y+45 > en.y) {
            lives--; enemies.splice(i,1);
            document.getElementById("hrt").innerText = "❤️".repeat(lives);
            if(lives<=0) { active=false; document.getElementById("menu").style.display="flex"; }
        }
    });

    if(Math.random() < 0.005) gems.push({x:canvas.width, y:Math.random()*canvas.height});
    gems.forEach((g, i) => {
        g.x -= 4; drawDiamond(g.x, g.y);
        if(player.x < g.x+30 && player.x+30 > g.x && player.y < g.y+30 && player.y+45 > g.y) {
            s += 100; gems.splice(i,1); document.getElementById("scr").innerText = s;
        }
    });

    requestAnimationFrame(loop);
}
</script>
</body>
</html>
